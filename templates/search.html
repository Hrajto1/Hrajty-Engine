<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hrajty ‚Äî Vyhled√°vaƒç</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<style>
:root {
  --background: #ffffff;
  --foreground: #111827;
  --primary: #2ecc71;
  --primary-dark: #22b66a;
  --secondary: #f3f4f6;
  --muted: #6b7280;
  --input-border: #d1d5db;
  --input-border-hover: #9ca3af;
  --input-border-focus: #2ecc71;
  --radius: 999px;
  --font-primary: 'Poppins', system-ui, sans-serif;
}
body {margin:0;font-family:var(--font-primary);background-color:var(--background);color:var(--foreground);display:flex;flex-direction:column;min-height:100vh;}
nav {display:flex;justify-content:flex-end;gap:1.5rem;padding:1rem 2rem;}
nav a {text-decoration:none;color:var(--muted);font-size:0.875rem;font-weight:500;transition:color 0.3s;}
nav a:hover {color:var(--primary);}
.container {flex:1;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding:2rem;text-align:center;position:relative;}
.logo {font-size:4rem;font-weight:700;background:linear-gradient(45deg,#2ecc71,#22b66a,#2ecc71);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:2rem;}
form {width:100%;max-width:600px;}
.search-wrapper {position:relative;margin-bottom:0.5rem;}
.search-wrapper input {width:100%;padding:0.75rem 1rem 0.75rem 3rem;font-size:1rem;border:2px solid var(--input-border);border-radius:var(--radius);outline:none;transition:all 0.3s;}
.search-wrapper input:focus {border-color:var(--input-border-focus);box-shadow:0 0 0 4px rgba(46,204,113,0.2);}
.search-wrapper .icon {position:absolute;left:0.75rem;top:50%;transform:translateY(-50%);color:var(--muted);}
.suggestions {position:absolute;top:100%;left:0;right:0;background-color:#fff;border:1px solid var(--input-border);border-top:none;border-radius:0 0 var(--radius) var(--radius);max-height:200px;overflow-y:auto;z-index:100;display:none;}
.suggestion-item {padding:0.5rem 1rem;cursor:pointer;transition:background 0.2s;}
.suggestion-item:hover {background-color:var(--secondary);}
.buttons {display:flex;flex-direction:column;gap:1rem;justify-content:center;align-items:center;margin-top:0.5rem;}
.buttons button {min-width:160px;padding:0.75rem 1.5rem;border-radius:var(--radius);border:1px solid var(--input-border);background-color:var(--secondary);color:var(--foreground);font-weight:500;cursor:pointer;transition:all 0.3s;}
.buttons button:hover {transform:scale(1.05);border-color:var(--input-border-hover);box-shadow:0 4px 12px rgba(0,0,0,0.1);}
.buttons button:active {transform:scale(0.95);}
#results {margin-top:2rem;max-width:600px;text-align:left;}
.result-item {padding:0.5rem 1rem;border-bottom:1px solid var(--input-border);display:flex;align-items:center;gap:0.5rem;}
.result-item img {width:16px;height:16px;}
.result-item a {font-weight:600;color:var(--primary);text-decoration:none;}
.result-item a:hover {text-decoration:underline;}
.result-item p {margin:0;color:var(--muted);font-size:0.875rem;}
footer {padding:1rem;text-align:center;font-size:0.875rem;color:var(--muted);}
</style>
</head>
<body>
<nav>
  <a href="#">Videa</a>
  <a href="#">Zpr√°vy</a>
  <a href="#">Obr√°zky</a>
</nav>

<div class="container">
  <h1 class="logo">Hrajty</h1>
  <form id="search-form">
    <div class="search-wrapper">
      <span class="icon">üîç</span>
      <input type="text" id="search-input" placeholder="Vyhled√°v√°n√≠ v Hrajty..." autocomplete="off" value="{{ query|default('') }}"/>
      <div id="suggestions" class="suggestions"></div>
    </div>

    <div class="buttons">
      <button type="submit">Hledat Hrajty</button>
      <button type="button" id="lucky-button">M√°m ≈°tƒõst√≠</button>
    </div>
  </form>

  <!-- V√Ωsledky vyhled√°v√°n√≠ -->
  <div id="results">
    {% if results %}
      {% for r in results %}
        <div class="result-item">
          <img src="{{ r.icon }}" alt="icon">
          <div>
            <a href="{{ r.url }}" target="_blank">{{ r.title }}</a>
            <p>{{ r.description }}</p>
          </div>
        </div>
      {% endfor %}
    {% elif query %}
      <p>≈Ω√°dn√© v√Ωsledky pro "{{ query }}"</p>
    {% endif %}
  </div>

</div>

<footer>Hrajto Studio</footer>

<script>
const searchInput = document.getElementById('search-input');
const suggestionsBox = document.getElementById('suggestions');
const form = document.getElementById('search-form');
const luckyBtn = document.getElementById('lucky-button');

searchInput.addEventListener('input', async () => {
  const term = searchInput.value.trim();
  if(!term) { suggestionsBox.style.display = 'none'; return; }

  const res = await fetch(`/suggest?term=${encodeURIComponent(term)}`);
  const suggestions = await res.json();

  if(suggestions.length) {
    suggestions.sort((a,b) => {
      const aStart = a.toLowerCase().startsWith(term.toLowerCase()) ? 0 : 1;
      const bStart = b.toLowerCase().startsWith(term.toLowerCase()) ? 0 : 1;
      return aStart - bStart || a.localeCompare(b);
    });

    suggestionsBox.innerHTML = suggestions.map(s => `<div class="suggestion-item">${s}</div>`).join('');
    suggestionsBox.style.display = 'block';

    document.querySelectorAll('.suggestion-item').forEach(item => {
      item.addEventListener('click', () => {
        searchInput.value = item.textContent;
        suggestionsBox.style.display = 'none';
        form.submit();
      });
    });
  } else {
    suggestionsBox.style.display = 'none';
  }
});

form.addEventListener('submit', e => {
  e.preventDefault();
  const query = searchInput.value.trim();
  if(query) window.location.href = `/?query=${encodeURIComponent(query)}`;
});

luckyBtn.addEventListener('click', async () => {
  const query = searchInput.value.trim();
  if(!query) return;

  const res = await fetch(`/suggest?term=${encodeURIComponent(query)}`);
  const suggestions = await res.json();
  if(suggestions.length) {
    searchInput.value = suggestions[0];
    form.submit();
  } else {
    alert("≈Ω√°dn√© v√Ωsledky pro: " + query);
  }
});

document.addEventListener('click', e => {
  if(!e.target.closest('.search-wrapper')) {
    suggestionsBox.style.display = 'none';
  }
});
</script>
</body>
</html>
